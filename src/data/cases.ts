import type { CaseScenario } from '@/types';

export const cases: CaseScenario[] = [
  {
    id: 'case-stemi-1',
    title: 'Chest Pain in the ED',
    conditionId: 'acs',
    difficulty: 'intermediate',
    presentation: 'A 58-year-old male presents to the ED with crushing substernal chest pain radiating to his left arm. Pain started 45 minutes ago while mowing the lawn. Associated with diaphoresis and nausea.',
    initialVitals: {
      heartRate: 102,
      bloodPressure: { systolic: 145, diastolic: 92 },
      respiratoryRate: 20,
      oxygenSaturation: 96,
      temperature: 37.2,
    },
    physicalExam: {
      general: 'Anxious, diaphoretic male in moderate distress',
      cardiovascular: 'Regular rhythm, no murmurs, rubs, or gallops. No JVD.',
      respiratory: 'Clear to auscultation bilaterally',
      abdominal: 'Soft, non-tender',
      skin: 'Diaphoretic',
    },
    history: {
      age: 58,
      sex: 'M',
      chiefComplaint: 'Chest pain',
      hpi: 'Patient was mowing lawn when he developed sudden onset crushing substernal chest pain radiating to left arm. Pain 8/10 severity. Associated with nausea and diaphoresis. No prior episodes. No relief with rest.',
      pmh: ['Hypertension', 'Hyperlipidemia', 'Type 2 Diabetes'],
      medications: ['Lisinopril 20mg daily', 'Atorvastatin 40mg daily', 'Metformin 1000mg BID'],
      allergies: ['NKDA'],
      socialHistory: '30 pack-year smoking history, occasional alcohol use',
    },
    correctActions: [
      {
        id: 'action-1',
        action: 'Place on cardiac monitor',
        category: 'stabilization',
        isCorrect: true,
        feedback: 'Excellent! Cardiac monitoring is critical for detecting arrhythmias in ACS.',
        timing: 'immediate',
      },
      {
        id: 'action-2',
        action: 'Obtain 12-lead ECG',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Critical! ECG must be obtained within 10 minutes to diagnose STEMI.',
        timing: 'immediate',
      },
      {
        id: 'action-3',
        action: 'Administer aspirin 325mg chewed',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Perfect! Aspirin is first-line therapy for ACS and should be given immediately.',
        timing: 'immediate',
      },
      {
        id: 'action-4',
        action: 'Establish IV access',
        category: 'stabilization',
        isCorrect: true,
        feedback: 'Good! IV access is essential for medication administration.',
        timing: 'immediate',
      },
      {
        id: 'action-5',
        action: 'Order troponin',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Correct! Troponin helps confirm myocardial injury.',
        timing: 'early',
      },
      {
        id: 'action-6',
        action: 'Give nitroglycerin 0.4mg SL',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Good choice! NTG helps with pain relief and may improve coronary blood flow.',
        timing: 'early',
      },
      {
        id: 'action-7',
        action: 'Activate cath lab',
        category: 'escalation',
        isCorrect: true,
        feedback: 'Critical decision! With STEMI, door-to-balloon time should be <90 minutes.',
        timing: 'immediate',
      },
    ],
    incorrectActions: [
      {
        id: 'wrong-1',
        action: 'Order chest CT before ECG',
        category: 'diagnostic',
        isCorrect: false,
        feedback: 'Incorrect. ECG must be first - it takes <2 minutes and is diagnostic for STEMI. Never delay ECG.',
      },
      {
        id: 'wrong-2',
        action: 'Give morphine before aspirin',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Wrong order. Aspirin should be given FIRST. Some studies suggest morphine may delay P2Y12 inhibitor absorption.',
      },
      {
        id: 'wrong-3',
        action: 'Wait for troponin results before treatment',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Dangerous delay! Treatment should start immediately based on ECG findings, not troponin results.',
      },
      {
        id: 'wrong-4',
        action: 'Discharge with follow-up if ECG normal',
        category: 'escalation',
        isCorrect: false,
        feedback: 'Dangerous! Even with normal initial ECG, ACS cannot be ruled out. Serial ECGs and troponins needed.',
      },
    ],
    timeline: [
      {
        time: 0,
        event: 'Patient arrives in ED with chest pain',
      },
      {
        time: 5,
        event: 'ECG obtained - shows ST elevation in V2-V4',
        vitals: {
          heartRate: 105,
          bloodPressure: { systolic: 140, diastolic: 88 },
        },
      },
      {
        time: 10,
        event: 'Aspirin given, cath lab activated',
        vitals: {
          heartRate: 98,
          bloodPressure: { systolic: 135, diastolic: 85 },
        },
      },
      {
        time: 30,
        event: 'Initial troponin elevated at 0.8 ng/mL',
      },
      {
        time: 75,
        event: 'Patient to cath lab - successful PCI of LAD',
      },
    ],
  },
  {
    id: 'case-stroke-1',
    title: 'Sudden Weakness and Speech Difficulty',
    conditionId: 'stroke',
    difficulty: 'advanced',
    presentation: 'A 72-year-old female brought in by EMS with sudden onset right-sided weakness and difficulty speaking. Last seen normal 90 minutes ago.',
    initialVitals: {
      heartRate: 88,
      bloodPressure: { systolic: 178, diastolic: 95 },
      respiratoryRate: 16,
      oxygenSaturation: 98,
      temperature: 37.0,
      gcs: 14,
    },
    physicalExam: {
      general: 'Alert but aphasic female',
      cardiovascular: 'Irregular rhythm consistent with atrial fibrillation',
      respiratory: 'Clear bilaterally',
      neurological: 'Right facial droop, right arm drift, global aphasia. NIHSS score 15.',
    },
    history: {
      age: 72,
      sex: 'F',
      chiefComplaint: 'Sudden weakness and speech problems',
      hpi: 'Patient was eating breakfast when family noticed she suddenly could not speak and had right-sided weakness. Last known normal time was 90 minutes ago. No head trauma. No seizure activity.',
      pmh: ['Atrial fibrillation (not on anticoagulation)', 'Hypertension', 'Prior TIA 2 years ago'],
      medications: ['Metoprolol 50mg BID', 'Lisinopril 10mg daily'],
      allergies: ['NKDA'],
    },
    correctActions: [
      {
        id: 'stroke-1',
        action: 'Check blood glucose immediately (point-of-care)',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Critical first step! Hypoglycemia can mimic stroke and must be ruled out immediately.',
        timing: 'immediate',
      },
      {
        id: 'stroke-2',
        action: 'Activate stroke code/team',
        category: 'escalation',
        isCorrect: true,
        feedback: 'Excellent! Time is brain - activate the stroke team immediately.',
        timing: 'immediate',
      },
      {
        id: 'stroke-3',
        action: 'Order STAT non-contrast head CT',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Perfect! Must differentiate ischemic from hemorrhagic stroke before tPA.',
        timing: 'immediate',
      },
      {
        id: 'stroke-4',
        action: 'Keep patient NPO',
        category: 'stabilization',
        isCorrect: true,
        feedback: 'Good! Aspiration risk until swallow screen completed.',
        timing: 'immediate',
      },
      {
        id: 'stroke-5',
        action: 'Lower BP to <185/110 before tPA',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Correct! BP must be <185/110 to safely give tPA. Use IV labetalol or nicardipine.',
        timing: 'immediate',
      },
      {
        id: 'stroke-6',
        action: 'Order coagulation panel (PT/INR, aPTT)',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Essential! Must check coags before tPA administration.',
        timing: 'immediate',
      },
      {
        id: 'stroke-7',
        action: 'Administer tPA 0.9 mg/kg',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Excellent decision! Patient meets criteria: within 4.5 hours, ischemic stroke on CT, BP controlled.',
        timing: 'immediate',
      },
    ],
    incorrectActions: [
      {
        id: 'stroke-wrong-1',
        action: 'Give aspirin before CT',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Dangerous! Must rule out hemorrhagic stroke with CT BEFORE any antiplatelets or anticoagulants.',
      },
      {
        id: 'stroke-wrong-2',
        action: 'Wait for MRI before treatment',
        category: 'diagnostic',
        isCorrect: false,
        feedback: 'Wrong! Non-contrast CT is sufficient to rule out hemorrhage. MRI causes dangerous delays.',
      },
      {
        id: 'stroke-wrong-3',
        action: 'Rapidly lower BP to 120/80',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Incorrect! Permissive hypertension is beneficial in acute ischemic stroke. Only lower if >220/120 or if giving tPA.',
      },
    ],
    timeline: [
      {
        time: 0,
        event: 'Patient arrives - last known normal 90 minutes ago',
      },
      {
        time: 8,
        event: 'Glucose normal at 108 mg/dL, CT scan shows no hemorrhage',
      },
      {
        time: 12,
        event: 'Coags normal, BP lowered to 180/92',
      },
      {
        time: 45,
        event: 'tPA bolus given, infusion started',
        vitals: {
          heartRate: 85,
          bloodPressure: { systolic: 175, diastolic: 88 },
        },
      },
      {
        time: 90,
        event: 'Patient showing improvement - able to move right arm slightly',
      },
    ],
  },
  {
    id: 'case-sepsis-1',
    title: 'Fever and Confusion',
    conditionId: 'sepsis',
    difficulty: 'intermediate',
    presentation: 'A 68-year-old male with fever, confusion, and decreased urine output for the past 24 hours.',
    initialVitals: {
      heartRate: 125,
      bloodPressure: { systolic: 85, diastolic: 52 },
      respiratoryRate: 28,
      oxygenSaturation: 91,
      temperature: 39.2,
    },
    physicalExam: {
      general: 'Lethargic, ill-appearing male',
      cardiovascular: 'Tachycardic, weak pulses, cool extremities',
      respiratory: 'Tachypneic, decreased breath sounds right base',
      abdominal: 'Soft, non-tender',
      skin: 'Warm, mottled',
    },
    history: {
      age: 68,
      sex: 'M',
      chiefComplaint: 'Fever and confusion',
      hpi: 'Patient developed fever yesterday with productive cough. Today became confused and sleepy. Family reports he has not urinated much in past 24 hours.',
      pmh: ['COPD', 'Chronic kidney disease stage 3'],
      medications: ['Albuterol inhaler PRN'],
      allergies: ['Penicillin (rash)'],
    },
    correctActions: [
      {
        id: 'sepsis-1',
        action: 'Establish large-bore IV access (2 lines)',
        category: 'stabilization',
        isCorrect: true,
        feedback: 'Critical! Need large-bore access for aggressive fluid resuscitation.',
        timing: 'immediate',
      },
      {
        id: 'sepsis-2',
        action: 'Order lactate level',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Excellent! Lactate is a key marker of tissue perfusion and sepsis severity.',
        timing: 'immediate',
      },
      {
        id: 'sepsis-3',
        action: 'Obtain blood cultures before antibiotics',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Correct! Blood cultures should be drawn BEFORE antibiotics when possible, but don\'t delay antibiotics >45 min.',
        timing: 'immediate',
      },
      {
        id: 'sepsis-4',
        action: 'Start 30 mL/kg crystalloid bolus',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Perfect! Aggressive early fluid resuscitation is essential in septic shock.',
        timing: 'immediate',
      },
      {
        id: 'sepsis-5',
        action: 'Administer broad-spectrum antibiotics within 1 hour',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Critical! Every hour delay increases mortality. Use empiric broad-spectrum coverage.',
        timing: 'immediate',
      },
      {
        id: 'sepsis-6',
        action: 'Order chest X-ray',
        category: 'diagnostic',
        isCorrect: true,
        feedback: 'Good! Helps identify pneumonia as likely source.',
        timing: 'early',
      },
      {
        id: 'sepsis-7',
        action: 'Start norepinephrine if hypotensive after fluids',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Correct! Vasopressors needed if hypotension persists despite adequate fluid resuscitation.',
        timing: 'early',
      },
    ],
    incorrectActions: [
      {
        id: 'sepsis-wrong-1',
        action: 'Wait for cultures to result before antibiotics',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Dangerous delay! Antibiotics must be given within 1 hour. Draw cultures quickly but don\'t wait for results.',
      },
      {
        id: 'sepsis-wrong-2',
        action: 'Give small fluid boluses (250 mL) slowly',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Insufficient! Need 30 mL/kg (about 2L for this patient) rapidly in first 3 hours.',
      },
    ],
    timeline: [
      {
        time: 0,
        event: 'Patient arrives hypotensive and tachycardic',
      },
      {
        time: 15,
        event: 'Initial lactate returns at 5.2 mmol/L',
      },
      {
        time: 35,
        event: 'Blood cultures drawn, antibiotics administered',
      },
      {
        time: 60,
        event: 'After 2L fluids, BP remains 78/45 - start norepinephrine',
        vitals: {
          heartRate: 118,
          bloodPressure: { systolic: 78, diastolic: 45 },
        },
      },
      {
        time: 120,
        event: 'BP improved to 102/62 on vasopressors, lactate 3.8',
        vitals: {
          heartRate: 105,
          bloodPressure: { systolic: 102, diastolic: 62 },
        },
      },
    ],
  },
  {
    id: 'case-anaphylaxis-1',
    title: 'Allergic Reaction After Antibiotic',
    conditionId: 'anaphylaxis',
    difficulty: 'beginner',
    presentation: 'A 32-year-old female develops hives, throat tightness, and difficulty breathing 10 minutes after receiving IV cefazolin in the ED for a skin infection.',
    initialVitals: {
      heartRate: 120,
      bloodPressure: { systolic: 88, diastolic: 55 },
      respiratoryRate: 26,
      oxygenSaturation: 92,
      temperature: 37.1,
    },
    physicalExam: {
      general: 'Anxious female in respiratory distress',
      cardiovascular: 'Tachycardic',
      respiratory: 'Inspiratory stridor, diffuse wheezing',
      skin: 'Diffuse urticaria, facial swelling',
    },
    history: {
      age: 32,
      sex: 'F',
      chiefComplaint: 'Difficulty breathing and rash',
      hpi: 'Patient came to ED for cellulitis treatment. After receiving IV cefazolin, developed itching, then hives all over body, followed by throat swelling and difficulty breathing.',
      pmh: ['None'],
      medications: ['None'],
      allergies: ['None previously known'],
    },
    correctActions: [
      {
        id: 'anaph-1',
        action: 'Administer epinephrine 0.3-0.5 mg IM immediately',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'PERFECT! Epinephrine IM is FIRST-LINE treatment for anaphylaxis. Never delay!',
        timing: 'immediate',
      },
      {
        id: 'anaph-2',
        action: 'Place on high-flow oxygen',
        category: 'stabilization',
        isCorrect: true,
        feedback: 'Good! Support oxygenation while treating the underlying anaphylaxis.',
        timing: 'immediate',
      },
      {
        id: 'anaph-3',
        action: 'Position patient supine with legs elevated',
        category: 'stabilization',
        isCorrect: true,
        feedback: 'Correct! Improves venous return in hypotensive patient.',
        timing: 'immediate',
      },
      {
        id: 'anaph-4',
        action: 'Start IV fluid bolus',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Good! Aggressive fluids needed for distributive shock.',
        timing: 'immediate',
      },
      {
        id: 'anaph-5',
        action: 'Repeat epinephrine in 5 minutes if no improvement',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Excellent! Can repeat epinephrine q5-15min as needed. Most patients need multiple doses.',
        timing: 'early',
      },
      {
        id: 'anaph-6',
        action: 'Give H1 blocker (diphenhydramine) as adjunct',
        category: 'therapeutic',
        isCorrect: true,
        feedback: 'Good adjunct therapy, but remember: epinephrine is first-line, antihistamines are secondary.',
        timing: 'early',
      },
    ],
    incorrectActions: [
      {
        id: 'anaph-wrong-1',
        action: 'Give antihistamines first before epinephrine',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'WRONG! Epinephrine is FIRST-LINE. Antihistamines alone are insufficient and dangerous delay.',
      },
      {
        id: 'anaph-wrong-2',
        action: 'Administer epinephrine IV push',
        category: 'therapeutic',
        isCorrect: false,
        feedback: 'Incorrect route! Use IM epinephrine (1:1000) for anaphylaxis. IV epinephrine is only for cardiac arrest.',
      },
      {
        id: 'anaph-wrong-3',
        action: 'Discharge after symptoms resolve in 30 minutes',
        category: 'escalation',
        isCorrect: false,
        feedback: 'Dangerous! Must observe 4-6 hours for biphasic reaction. Up to 20% have second wave of symptoms.',
      },
    ],
    timeline: [
      {
        time: 0,
        event: 'Symptoms begin after cefazolin',
      },
      {
        time: 2,
        event: 'IM epinephrine 0.3mg given',
      },
      {
        time: 8,
        event: 'Minimal improvement, second dose epinephrine given',
        vitals: {
          heartRate: 115,
          bloodPressure: { systolic: 92, diastolic: 58 },
        },
      },
      {
        time: 15,
        event: 'Significant improvement in breathing, BP stabilizing',
        vitals: {
          heartRate: 95,
          bloodPressure: { systolic: 108, diastolic: 68 },
          oxygenSaturation: 97,
        },
      },
      {
        time: 240,
        event: 'Observed for 4 hours, no biphasic reaction, ready for discharge with EpiPen',
      },
    ],
  },
];
